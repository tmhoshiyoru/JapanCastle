<!DOCTYPE html>
<html lang="zh-Hant">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>日本百大名城・續百大名城地圖</title>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/leaflet@1.9.4/dist/leaflet.css" />
    <style>
      * { box-sizing: border-box; }
      body { margin: 0; font-family: system-ui, -apple-system, "Noto Sans TC", Arial; color: #222; }
      .topbar { position: sticky; top: 0; z-index: 1100; display: flex; justify-content: space-between; align-items: center; padding: 10px 14px; border-bottom: 1px solid #eee; background: #fff; }
      .topbar h1 { font-size: 18px; margin: 0; }
      .legend { font-size: 14px; color: #555; }
      .dot { display: inline-block; width: 10px; height: 10px; border-radius: 999px; margin: 0 4px 0 10px; vertical-align: middle; }
      .dot-100 { background: #0b6efd; }
      .dot-200 { background: #9b59b6; }
      #map { height: calc(100vh - 160px); position: relative; }
      .panel {
        position: absolute; right: 12px; top: 70px;
        background: rgba(255,255,255,0.95); border: 1px solid #eee; border-radius: 10px;
        padding: 10px; font-size: 14px; box-shadow: 0 4px 14px rgba(0,0,0,.06);
        z-index: 1050; min-width: 240px;
      }
      .panel .row { margin-top: 10px; }
      .panel label { display: block; margin: 4px 0; }
      .panel select, .panel button { width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 8px; background: #fff; }
      .foot { padding: 10px 14px; font-size: 12px; color: #666; border-top: 1px solid #eee; background: #fff; }
      .leaflet-div-icon { background: transparent; border: none; }
      .marker-100, .marker-200 { width: 18px; height: 18px; border-radius: 999px; border: 2px solid #fff; box-shadow: 0 0 0 1px rgba(0,0,0,.2); }
      .marker-100 { background: #0b6efd; }
      .marker-200 { background: #9b59b6; }
      .muted { color:#666; font-size:12px; }

      /* Popup 內樣式 */
      .popup-wrap { max-width: 280px; }
      .popup-title { font-weight: 700; }
      .popup-sub { color:#666; font-size:12px; }
      .info-grid { margin: 6px 0; font-size: 13px; }
      .info-row { margin: 4px 0; line-height: 1.4; }
      .info-label { display:inline-block; min-width: 64px; color:#555; }
      .thumbs { display:flex; gap:6px; margin-top:8px; overflow-x:auto; }
      .thumbs img { width: 90px; height: 64px; object-fit: cover; border-radius: 6px; border: 1px solid #eee; }
      .badge { display:inline-block; padding:2px 6px; border-radius:6px; font-size:12px; color:#fff; background:#0b6efd; }
      .badge.badge-200 { background:#9b59b6; }
    </style>
  </head>
  <body>
    <header class="topbar">
      <h1>日本百大名城・續百大名城地圖</h1>
      <div class="legend">
        <span class="dot dot-100" title="百名城"></span> 百名城
        <span class="d
